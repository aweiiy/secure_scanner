python > ansible (with args) > docker > scan > back to server

ansbile with ID and url to docker;
create a file named with the ID of the report;
store results into file;
then from docker back to webserver:/add/{ID} with the results of the scan

ansible args: -i {ID} {url}
example:
ansible -i 1234 http://www.google.com

inside ansible:
docker run --rm -it instrumentisto/nmap -A -T4 -oX /tmp/{ID}.xml {url} > /tmp/{ID}.xml | curl -F "file=@/tmp/{ID}.xml" http://webserver/add/{ID}